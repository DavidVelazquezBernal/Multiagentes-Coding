{'type': 'text', 'text': "```typescript\n/**\n * Interfaces mínimas necesarias para representar los objetos de Express \n * y asegurar que la función sea autocontenida.\n */\nexport interface Request {\n    method: string;\n    url: string;\n    headers: Record<string, string | string[] | undefined>;\n}\n\nexport interface Response {\n    statusCode: number;\n    on(event: 'finish' | 'close', listener: () => void): this;\n}\n\nexport type NextFunction = (err?: any) => void;\n\n/**\n * Middleware de logging para aplicaciones Express/Node.js que registra peticiones y respuestas.\n * Clasifica la severidad según el código de estado HTTP y calcula el tiempo de respuesta.\n * \n * Formato de salida: [Nivel] [Timestamp] [Método] [URL] [Status] [Tiempo de respuesta]\n * \n * @param req - Objeto de petición de Express\n * @param res - Objeto de respuesta de Express\n * @param next - Función para continuar el flujo del middleware\n */\nexport function loggingMiddleware(req: Request, res: Response, next: NextFunction): void {\n    // Captura del tiempo inicial usando el reloj de alta resolución de Node.js\n    const startTime = process.hrtime();\n\n    // El evento 'finish' indica que la respuesta se ha enviado completamente al cliente\n    res.on('finish', () => {\n        try {\n            // Cálculo de la diferencia de tiempo\n            const diff = process.hrtime(startTime);\n            \n            // Conversión a milisegundos: segundos * 1000 + nanosegundos / 1e6\n            const rawDuration = diff[0] * 1e3 + diff[1] * 1e-6;\n            \n            // Aplicación de redondeo para evitar errores de precisión binaria (según requerimiento)\n            const durationInMs = Math.round(rawDuration * 1e10) / 1e10;\n\n            const { method, url } = req;\n            const { statusCode } = res;\n            const timestamp = new Date().toISOString();\n\n            // Clasificación por niveles de severidad\n            let level: 'INFO' | 'WARN' | 'ERROR' = 'INFO';\n            \n            if (statusCode >= 400) {\n                level = 'ERROR';\n            } else if (statusCode >= 300) {\n                level = 'WARN';\n            }\n\n            // Construcción del mensaje siguiendo el formato requerido\n            const logMessage = `[${level}] [${timestamp}] [${method}] [${url}] [${statusCode}] [${durationInMs}ms]`;\n\n            // Emisión del log según el nivel de severidad\n            if (level === 'ERROR') {\n                console.error(logMessage);\n            } else if (level === 'WARN') {\n                console.warn(logMessage);\n            } else {\n                console.log(logMessage);\n            }\n        } catch (error) {\n            // Manejo básico de errores interno para evitar que el logger rompa el proceso\n            console.error('[INTERNAL_LOGGER_ERROR]', error instanceof Error ? error.message : String(error));\n        }\n    });\n\n    // Continuar con el siguiente middleware o ruta\n    next();\n}\n```", 'extras': {'signature': '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'}}